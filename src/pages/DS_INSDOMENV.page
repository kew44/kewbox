<apex:page standardController="DS_Background_Family_Info_B__c" extensions="DS_INSDOMENV_Controller">
 
    <!--JQuery -->
    <apex:includeScript value="{!URLFOR($Resource.jQuery, '/js/jquery-1.9.1.js')}"  /><!--allows for JQuery dependencies-->
    <script> $j = jQuery.noConflict(); </script><!--Reserves the '$' token for JQuery only-->
    
        <!-- Bootstrap -->
        <link href="{!URLFOR($Resource.VFbootstrap3, '/css/VFbootstrap.css')}" rel="stylesheet" media="screen"/>
            <apex:includeScript value="{!URLFOR($Resource.VFbootstrap3, '/js/bootstrap.min.js')}"/>

                <!--link to the CSS resource in Salesforce internal document-->
                    <apex:stylesheet value="{!$Resource.CustomCss}" />           
                        
                        <!--provides framework for "skip-logic" capabilities-->
                            <script>function setFocusOnLoad() {}</script>
                            <script> var skipElement = JSON.parse("{!JSENCODE(skipElementToJson)}"); </script>
                            <script src="{!URLFOR($Resource.Scripts, '/skipLogic.js')}"></script>
    
    <!--JQuery script for allowing de-selection of radiobuttons-->   
    <script>
    $j(document).ready(function(){        
        $j('input[type="radio"]').click(function(){            
            var previousValue = $j(this).attr('title');
            var val = $j(this).val();
            var name = $j(this).attr('name');      
            
            if (previousValue == val) {  // uncheck radio button
                $j(this).removeAttr('checked').change();
                $j("input[name='"+name+"']:radio").attr('title', '');
            }
            else {
                $j("input[name='"+name+"']:radio").attr('title', val);
            }            
        });        
    });    
    </script><!--End JQuery deselect radiobutton value script -->
        
    <!--JQuery script to hide skip-logic questions when the conditional answer has been overwitten-->
    <script type="text/javascript">
    function skipLogic(resource, value) {        
        var element = skipElement[resource];        
        var animation = (Initial == true) ? null : "slow";        
        var fieldType = ['text', 'number', 'picklist'];        
        var elementType;        
        var resourceElement = $j('[name$="'+resource+'__c"]');
        
        if(value != 'undefined') {//radiobutton deselected
            if(resourceElement.is(":radio")) {
                value = $j('[name$="'+resource+'__c"]:checked').val();
            }
            else if(resourceElement.is(":checkbox")) {
                value = resourceElement.is(':checked');
            }
            else {
                value = resourceElement.val();
            }
        }
        
        $j.each(element, function(key, items) {    //checkbox unchecked        
            if(String(value) == element[key].triggerValue) {
                action = element[key].rendered;
            }
            else {
                action = !element[key].rendered;
                
                if(checkObjectExist(skipElement, key)) 
                    skipLogic(key, 'undefined');                
                if(jQuery.inArray(element[key].fieldType, fieldType) != -1)         
                    $j('.skip-element-'+key).val('');
                else if(element[key].fieldType == 'checkbox') 
                    $j('.skip-element-'+key).prop('checked', false);
            }            
            if(action == true) $j('.skip-'+key).show(animation);
            else $j('.skip-'+key).hide(animation);            
        });        
    }    
    </script>
    <!--end hide logic block-->
    
    <!-- "Breadcrumb" heading allows user to navigate to the ClientSummary page -->
    <apex:outputPanel rendered="{!if(forceRedirect = '1', false, true)}" layout="none">
        <script>
            $j(document).ready(function() {
                $j('.bPageTitle').append('<div class="ptBreadcrumb">&nbsp;«&nbsp;<a href="/apex/ClientSummary?s=0&id={!client.id}">Back to Client Summary</a></div>');
            });
        </script>
    </apex:outputPanel>
    <!--end breadcrumb-->
    
    <!--Begin form content-->
    <apex:form id="DS_FORM" styleClass="form-horizontal">
        <apex:sectionHeader title="INSURANCE INFORMATION" subtitle="{!subtitle}"/><br/>
        
        <!-- pageblock to show ClientInformation header as described in Utility class-->
        <apex:pageBlock title="Client Information">
            <div id="force">
                <apex:outputText value="{!ClientInfo}" escape="false"/>
            </div>
        </apex:pageBlock><!--end client info pageBlock-->
        
        <!-- primary content pageBlock container-->
        <apex:pageBlock title="INSURANCE INFO" >
            <apex:pageMessages /><!--placeholding structure that allows for system message display-->
            
            <div id="force">                 
                <table class="table DS-table">
                    <tbody>
                    <!--Begin insurance and domestic environment questionnaire-->
                    
                        <!--1. Does child have insurance?-->
                        <tr>
                            <td><p class="text-right"><b>1.</b></p></td>
                            <td>Is the child currently covered by any type of public or private health insurance?
                                <apex:selectRadio styleClass="form-control2" id="BCINANY__c" value="{!obj.BCINANY__c}" layout="pageDirection" title="{!obj.BCINANY__c}" onChange="skipLogic('BCINANY',this.value)">
                                    <apex:selectOptions value="{!CTYNUNItems}"/> 
                                </apex:selectRadio>
                            </td>
                        </tr>
                        
                        <tr class="skip-BCINPUB"><!--Conditional if child is insured-->
                            <!--1a. Public or private?-->
                            <td class="skipContent"><p class="text-right"><b>1a.</b></p></td>
                            <td>What type of public or private health insurance is currently covering the child? <b>(Select all that apply.)</b>
                            <br/>
                                <!--public insurance-->
                                <label>
                                    <apex:inputCheckbox styleClass="form-control2 skip-element-BCINPUB" id="BCINPUB__c" value="{!obj.BCINPUB__c}" label="Public" onChange="skipLogic('BCINPUB',this.checked)"/>
                                    Public<br/>                    
                                </label>
                                    
                                    <table>
                                        <!--conditional checkboxes if public insurance-->
                                        <td class="skip-BCINCHIP">
                                            <div class="checkbox">
                                                <!--Chip-->
                                                <div class="skipContent checkline">
                                                    <label>             
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINCHIP"  id="BCINCHIP__c" value="{!obj.BCINCHIP__c}" label="Children’s Health Insurance Program (CHIP)"/>
                                                        Children’s Health Insurance Program (CHIP)<br/>
                                                    </label>
                                                </div>
                                                <!--Indian Health Service-->
                                                <div class="skipContent checkline">
                                                    <label>             
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINIH"  id="BCINIH__c" value="{!obj.BCINIH__c}" label="Indian Health Service"/>
                                                        Indian Health Service<br/>
                                                    </label>
                                                </div>
                                                <!--Medicaid-->
                                                <div class="skipContent checkline">
                                                    <label>             
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINMEDD"  id="BCINMEDD__c" value="{!obj.BCINMEDD__c}" label="Medicaid"/>
                                                        Medicaid<br/>
                                                    </label>
                                                </div>
                                                <!--Medicare-->
                                                <div class="skipContent checkline">
                                                    <label>             
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINMEDR"  id="BCINMEDR__c" value="{!obj.BCINMEDR__c}" label="Medicare"/>
                                                        Medicare<br/>
                                                    </label>
                                                </div>
                                                <!--Military-->
                                                <div class="skipContent checkline">
                                                    <label>             
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINMHC"  id="BCINMHC__c" value="{!obj.BCINMHC__c}" label="Military health care (TRICARE, CHAMPVA)"/>
                                                        Military health care (TRICARE, CHAMPVA)<br/>
                                                    </label>
                                                </div> 
                                                <!--Unknown-->
                                                <div class="skipContent checkline">
                                                    <label>             
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINPBUK"  id="BCINPBUK__c" value="{!obj.BCINPBUK__c}" label="Unknown"/>
                                                        Unknown<br/>
                                                    </label>
                                                </div>                
                                                <!--Other-->
                                                <div class="skipContent checkline">
                                                    <label>             
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINOPUB"  id="BCINOPUB__c" value="{!obj.BCINOPUB__c}" label="Other public" onChange="skipLogic('BCINOPUB',this.checked)"/>
                                                        Other public<br/>
                                                    </label>
                                                    <div class="skip-BCINOPSP"><!--Conditional if other, specify-->
                                                        <apex:outputLabel value="Please Specify: " for="BCINOPSP__c"/>                            
                                                        <apex:inputField styleClass="form-control2 skip-element-BCINOPSP"  id="BCINOPSP__c" value="{!obj.BCINOPSP__c}" label="Please Specify"/><br/>
                                                    </div><!--end other conditional-->
                                                </div>
                                            </div><!--end checkboxes-->
                                        </td>
                                    <!--end public conditional-->
                                    </table>
                                
                                <!--private insurance-->
                                <label>
                                    <apex:inputCheckbox styleClass="form-control2 skip-element-BCINPRIV"  id="BCINPRIV__c" value="{!obj.BCINPRIV__c}" label="Private" onChange="skipLogic('BCINPRIV',this.checked)"/>
                                    Private<br/>
                                </label>
                                
                                    <table>
                                        <!--conditional checkboxes if private insurance-->
                                        <td class="skip-BCINHMO">
                                            <div class="checkbox">
                                                <!--HMO-->
                                                <div class="skipContent checkline">                                                
                                                    <label>             
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINHMO"  id="BCINHMO__c" value="{!obj.BCINHMO__c}" label="HMO"/>
                                                        HMO<br/>
                                                    </label>
                                                </div>
                                                <!--PPO-->
                                                <div class="skipContent checkline">
                                                    <label>              
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINPPO"  id="BCINPPO__c" value="{!obj.BCINPPO__c}" label="PPO"/>
                                                        PPO<br/>
                                                    </label>
                                                </div>
                                                <!--fee for service-->
                                                <div class="skipContent checkline">
                                                    <label> 
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINFFS"  id="BCINFFS__c" value="{!obj.BCINFFS__c}" label="Fee-for-service"/>
                                                        Fee-for-service<br/>
                                                    </label>
                                                </div>
                                                <!--unknown-->
                                                <div class="skipContent checkline">
                                                    <label> 
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINPRUK"  id="BCINPRUK__c" value="{!obj.BCINPRUK__c}" label="Unknown"/>
                                                        Unknown<br/>
                                                    </label>
                                                </div>
                                                <!--other-->
                                                <div class="skipContent checkline">
                                                    <label> 
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BCINOPRI"  id="BCINOPRI__c" value="{!obj.BCINOPRI__c}" label="Other private" onChange="skipLogic('BCINOPRI',this.checked)"/>
                                                        Other private<br/>
                                                    </label>
                                                    <div class="skip-BCINOPRS"><!--Conditional if other, specify-->
                                                        <apex:outputLabel value="Please Specify: " for="BCINOPRS__c"/>
                                                        <apex:inputField styleClass="form-control2 skip-element-BCINOPRS"  id="BCINOPRS__c" value="{!obj.BCINOPRS__c}" label="Please Specify"/>
                                                    </div><!--end other conditional-->                           
                                                </div>
                                            </div>
                                        </td>
                                    <!--end private conditional-->
                                    </table>
                            </td>
                        </tr>
                        
                        <!--2. Does parent have insurance?-->
                        <tr>
                            <td ><p class="text-right"><b>2.</b></p></td>
                            <td>Is the child’s parent/guardian covered by any type of insurance?
                                <apex:selectRadio styleClass="form-control2" id="BPINANY__c" value="{!obj.BPINANY__c}" layout="pageDirection" title="{!obj.BPINANY__c}" onChange="skipLogic('BPINANY',this.value)">
                                    <apex:selectOptions value="{!CTYNUNItems}"/> 
                                </apex:selectRadio>
                            </td>
                        </tr>
                                                
                        <tr class="skip-BPINPUB"><!--Conditional if parent is insured-->
                            <!--2a. Public or private?-->
                            <td class="skipContent"><p class="text-right"><b>2a.</b></p></td>
                            <td>What type of public or private health insurance is currently covering the child’s parent/guardian? <b>(Select all that apply.)</b>
                            <br/>
                                <!--public insurance-->
                                <label>
                                    <apex:inputCheckbox styleClass="form-control2" id="BPINPUB__c" value="{!obj.BPINPUB__c}" label="Public" onChange="skipLogic('BPINPUB',this.checked)"/>
                                    Public<br/>
                                </label>
                                
                                    <table>
                                        <!--conditional checkboxes if public insurance-->
                                        <td class="skip-BPINCHIP">
                                                <div class="checkbox">
                                                <!--Chip-->
                                                <div class="skipContent checkline">
                                                    <label>
                                                        <apex:inputCheckbox id="BPINCHIP__c" value="{!obj.BPINCHIP__c}" label="Children’s Health Insurance Program (CHIP)"/>
                                                        Children’s Health Insurance Program (CHIP) <b>(Parents under 18 years of age)</b><br/>
                                                    </label>
                                                </div>
                                                <!--Indian Health Service-->
                                                <div class="skipContent checkline">
                                                    <label>
                                                        <apex:inputCheckbox id="BPINIH__c" value="{!obj.BPINIH__c}" label="Indian Health Service"/>
                                                        Indian Health Service<br/>
                                                    </label>
                                                </div>
                                                <!--Medicaid-->
                                                <div class="skipContent checkline">
                                                    <label>
                                                        <apex:inputCheckbox id="BPINMEDD__c" value="{!obj.BPINMEDD__c}" label="Medicaid"/>
                                                        Medicaid<br/>
                                                    </label>
                                                </div>
                                                <!--Medicare-->
                                                <div class="skipContent checkline">
                                                    <label>
                                                        <apex:inputCheckbox id="BPINMEDR__c" value="{!obj.BPINMEDR__c}" label="Medicare"/>
                                                        Medicare<br/>
                                                    </label>
                                                </div>
                                                <!--Military-->
                                                <div class="skipContent checkline">
                                                    <label>
                                                        <apex:inputCheckbox id="BPINMHC__c" value="{!obj.BPINMHC__c}" label="Military health care (TRICARE, CHAMPVA)"/>
                                                        Military health care (TRICARE, CHAMPVA)<br/>
                                                    </label>
                                                </div>  
                                                <!--Other-->
                                                <div class="skipContent checkline">
                                                    <label>
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BPINOPUB" id="BPINOPUB__c" value="{!obj.BPINOPUB__c}" label="Other Public" onChange="skipLogic('BPINOPUB', this.checked)"/>
                                                        Other public<br/>
                                                    </label>
                                                    <div class="skip-BPINOPSP"><!--Conditional if other, specify-->
                                                        <apex:outputLabel value="Please Specify: "  for="BPINOPSP__c"/>
                                                        <apex:inputField styleClass="form-control2 skip-element-BPINOPSP" id="BPINOPSP__c" value="{!obj.BPINOPSP__c}" label="Please Specify"/><br/>
                                                    </div><!--end other conditional-->
                                                </div>
                                            </div><!--end checkboxes-->
                                        </td>
                                    <!--end public conditional-->
                                    </table>
                                
                                <!--private insurance-->
                                <label>
                                    <apex:inputCheckbox styleClass="form-control2" id="BPINPRIV__c" value="{!obj.BPINPRIV__c}" label="Private" onChange="skipLogic('BPINPRIV',this.checked)"/>
                                    Private<br/> 
                                </label> 
                                
                                    <table>
                                        <!--conditional checkboxes if private insurance-->
                                        <td class="skip-BPINHMO">
                                            <div class="checkbox">
                                                <!--HMO-->
                                                <div class="skipContent checkline">
                                                    <label>
                                                        <apex:inputCheckbox id="BPINHMO__c" value="{!obj.BPINHMO__c}" label="HMO"/>
                                                        HMO<br/>
                                                    </label>
                                                </div>
                                                <!--PPO-->
                                                <div class="skipContent checkline">
                                                    <label>
                                                        <apex:inputCheckbox id="BPINPPO__c" value="{!obj.BPINPPO__c}" label="PPO"/>
                                                        PPO<br/>
                                                    </label>
                                                </div>
                                                <!--fee for service-->
                                                <div class="skipContent checkline">
                                                    <label>
                                                        <apex:inputCheckbox id="BPINFFS__c" value="{!obj.BPINFFS__c}" label="Fee-for-service  "/>
                                                        Fee-for-service<br/>
                                                    </label>
                                                </div>
                                                <!--other-->
                                                <div class="skipContent checkline">
                                                    <label>
                                                        <apex:inputCheckbox styleClass="form-control2 skip-element-BPINOPRI"  id="BPINOPRI__c" value="{!obj.BPINOPRI__c}" label="Other private" onChange="skipLogic('BPINOPRI',this.checked)"/>
                                                        Other private<br/>
                                                    </label>
                                                    <div class="skip-BPINOPRS"><!--Conditional if other, specify-->
                                                        <apex:outputLabel value="Please Specify: " for="BPINOPRS__c"/>
                                                        <apex:inputField styleClass="form-control2 skip-element-BPINOPRS__c"  id="BPINOPRS" value="{!obj.BPINOPRS__c}" label="Please Specify"/>
                                                    </div><!--end other conditional-->     
                                                </div>
                                            </div>
                                        </td>
                                    <!--end private conditional-->
                                    </table>                                
                            </td>                            
                        </tr>
                        
                        
                        <tr>
                        <!--Completion status control-->
                            <td colspan="2" class="text-right complete-title">
                                <b>Complete?</b>
                                &nbsp;&nbsp;
                                <apex:selectList id="STATUS_INSDOMENV__c" styleClass="form-control input-sm auto-width" value="{!obj.STATUS_INSDOMENV__c}" size="1">
                                    <apex:selectOption itemValue="Incomplete" itemLabel="Incomplete"/>
                                    <apex:selectOption itemValue="Complete" itemLabel="Complete"/>
                                </apex:selectList> 
                            </td>
                        <!--end completion status--> 
                        </tr>
                        
                    </tbody>
                </table>
                
            </div>
            
            <!--save and cancel control buttons for pageBlock-->
            <apex:pageBlockButtons >
                <apex:commandButton id="Save" action="{!save}" value="Save"/>
                <apex:commandButton id="Cancel" action="{!cancel}" value="Cancel" rendered="{!if(forceRedirect = '1', false, true)}"/>
            </apex:pageBlockButtons><!--end buttons-->
            
        </apex:pageBlock><!--end insdomenv pageBlock-->
        
        <apex:actionStatus id="loading" onstart="loading(true)" onstop="loading(false)" />
        
    </apex:form>
    <!--end form content-->
    
    <!--supplementary styling information-->
    <style>
        .loader {
        background: url('/img/loading32.gif') scroll no-repeat 0 0;
        width: 32px;
        height: 32px;
        position: absolute;
        left: 50%;
        }
    </style>
    <!--end styling-->
    
    <!--loadingBox-->  
    <div id="load_scrl" class="loadingBox loader" style="display:none;"> </div>
    
    <script type="text/javascript">
    function loading(val) {
        if(val) { $j('#load_scrl').css('top', $j(document).scrollTop() + 200); $j('.loadingBox').show(); }
        else $j('.loadingBox').hide();
    }
    </script>
    
    <!--citation information footer-->
    <p style="class:footer; text-align:center ">
        <i>This form is part of the Clinical Improvement through Measurement Initiative (CIMI) of the National Child Traumatic Stress Network (NCTSN) - Baseline - CRF Version 6 2014
        </i>
    </p>
</apex:page>